<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webchat Widget Configuration</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }

    .card h2 {
      font-size: 1.5rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .color-section {
      margin-bottom: 25px;
    }

    .color-section label {
      display: block;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }

    .color-input-group {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .color-picker {
      width: 60px;
      height: 45px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    .color-picker:hover {
      border-color: #3B82F6;
    }

    .color-text {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Courier New', monospace;
      transition: border-color 0.2s;
    }

    .color-text:focus {
      outline: none;
      border-color: #3B82F6;
    }

    .apply-btn {
      width: 100%;
      padding: 14px;
      background: #3B82F6;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .apply-btn:hover {
      background: #2563EB;
    }

    .presets {
      margin-top: 25px;
      padding-top: 25px;
      border-top: 2px solid #f0f0f0;
    }

    .presets h3 {
      font-size: 1rem;
      margin-bottom: 15px;
      color: #666;
    }

    .preset-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .preset-btn {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .preset-btn:hover {
      border-color: #3B82F6;
      transform: translateY(-2px);
    }

    .preset-colors {
      display: flex;
      gap: 5px;
    }

    .preset-color {
      width: 30px;
      height: 30px;
      border-radius: 6px;
    }

    .preset-name {
      font-size: 12px;
      color: #666;
      font-weight: 500;
    }

    .preview-section {
      position: relative;
      min-height: 400px;
    }

    .embed-section {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
    }

    .embed-section h3 {
      font-size: 1.1rem;
      margin-bottom: 15px;
      color: #333;
    }

    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      overflow-x: auto;
      margin-bottom: 15px;
      position: relative;
    }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 8px 16px;
      background: #3B82F6;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .copy-btn:hover {
      background: #2563EB;
    }

    .copy-btn.copied {
      background: #10B981;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .feature {
      background: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .feature h3 {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #333;
    }

    .feature p {
      font-size: 0.85rem;
      color: #666;
      line-height: 1.4;
    }

    @media (max-width: 968px) {
      .content {
        grid-template-columns: 1fr;
      }

      .features {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 640px) {
      .header h1 {
        font-size: 1.8rem;
      }

      .features {
        grid-template-columns: 1fr;
      }

      .preset-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>üé® Webchat Widget Configurator</h1>
      <p>Customize your AI chatbot colors and get the embed code instantly</p>
    </div>

    <!-- Features -->
    <div class="features">
      <div class="feature">
        <div class="feature-icon">üí¨</div>
        <h3>Real-time Chat</h3>
        <p>Instant messaging with smooth animations</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üé®</div>
        <h3>Full Customization</h3>
        <p>Change colors with hex codes instantly</p>
      </div>
      <div class="feature">
        <div class="feature-icon">‚ö°</div>
        <h3>Easy Integration</h3>
        <p>Simple 2-line embed code</p>
      </div>
      <div class="feature">
        <div class="feature-icon">ü§ñ</div>
        <h3>AI Powered</h3>
        <p>Intelligent responses with context</p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content">
      <!-- Customization Panel -->
      <div class="card">
        <h2>
          <span>üé®</span>
          Customize Colors
        </h2>

        <div class="color-section">
          <label for="primary-color">Primary Color (Buttons & User Messages)</label>
          <div class="color-input-group">
            <input type="color" id="primary-color" class="color-picker" value="#3B82F6">
            <input type="text" id="primary-text" class="color-text" value="#3B82F6" placeholder="#3B82F6">
          </div>
        </div>

        <div class="color-section">
          <label for="secondary-color">Secondary Color (Background Accents)</label>
          <div class="color-input-group">
            <input type="color" id="secondary-color" class="color-picker" value="#EFF6FF">
            <input type="text" id="secondary-text" class="color-text" value="#EFF6FF" placeholder="#EFF6FF">
          </div>
        </div>

        <button class="apply-btn" onclick="applyColors()">Apply Colors</button>

        <div class="presets">
          <h3>Color Presets</h3>
          <div class="preset-grid">
            <button class="preset-btn" onclick="applyPreset('#3B82F6', '#EFF6FF')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #3B82F6;"></div>
                <div class="preset-color" style="background: #EFF6FF;"></div>
              </div>
              <span class="preset-name">Blue</span>
            </button>
            <button class="preset-btn" onclick="applyPreset('#8B5CF6', '#F5F3FF')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #8B5CF6;"></div>
                <div class="preset-color" style="background: #F5F3FF;"></div>
              </div>
              <span class="preset-name">Purple</span>
            </button>
            <button class="preset-btn" onclick="applyPreset('#10B981', '#ECFDF5')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #10B981;"></div>
                <div class="preset-color" style="background: #ECFDF5;"></div>
              </div>
              <span class="preset-name">Green</span>
            </button>
            <button class="preset-btn" onclick="applyPreset('#F59E0B', '#FEF3C7')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #F59E0B;"></div>
                <div class="preset-color" style="background: #FEF3C7;"></div>
              </div>
              <span class="preset-name">Orange</span>
            </button>
            <button class="preset-btn" onclick="applyPreset('#EF4444', '#FEE2E2')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #EF4444;"></div>
                <div class="preset-color" style="background: #FEE2E2;"></div>
              </div>
              <span class="preset-name">Red</span>
            </button>
            <button class="preset-btn" onclick="applyPreset('#14B8A6', '#F0FDFA')">
              <div class="preset-colors">
                <div class="preset-color" style="background: #14B8A6;"></div>
                <div class="preset-color" style="background: #F0FDFA;"></div>
              </div>
              <span class="preset-name">Teal</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Preview & Embed Code -->
      <div class="card">
        <h2>
          <span>üëÅÔ∏è</span>
          Live Preview
        </h2>
        <div class="preview-section">
          <p style="color: #666; margin-bottom: 20px;">Click the chat button in the bottom-right corner to test the
            widget with your custom colors!</p>
        </div>

        <div class="embed-section">
          <h3>üìã Embed Code</h3>
          <div class="code-block">
            <button class="copy-btn" onclick="copyEmbedCode()">Copy</button>
            <div id="embed-code">
              &lt;!-- AI Chat Widget --&gt;<br>
              &lt;webchat-widget<br>
              &nbsp;&nbsp;agent-id="<span id="agent-id-display">YOUR_AGENT_ID</span>"<br>
              &nbsp;&nbsp;primary-color="<span id="primary-display">#3B82F6</span>"<br>
              &nbsp;&nbsp;secondary-color="<span id="secondary-display">#EFF6FF</span>"&gt;<br>
              &lt;/webchat-widget&gt;<br>
              &lt;script src="<span id="base-url-display">https://yourapi.com</span>/widget.js" async&gt;&lt;/script&gt;
            </div>
          </div>
          <p style="font-size: 0.9rem; color: #666; line-height: 1.6;">
            <strong>Note:</strong> Replace <code
              style="background: #f0f0f0; padding: 2px 6px; border-radius: 4px;">YOUR_AGENT_ID</code> with your actual
            webchat agent ID. You can change the colors anytime by updating the hex values in the embed code.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Widget Script -->
  <script src="/widget.js" async></script>

  <!-- Widget Script -->
  <script src="/widget.js" async></script>

  <script>
    // Get URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const agentId = urlParams.get('agent_id') || 'YOUR_AGENT_ID';
    const baseUrl = window.location.origin;

    // Create widget instance with agent_id from URL
    if (agentId && agentId !== 'YOUR_AGENT_ID') {
      const widget = document.createElement('webchat-widget');
      widget.id = 'demo-widget';
      widget.setAttribute('agent-id', agentId);
      widget.setAttribute('primary-color', '#3B82F6');
      widget.setAttribute('secondary-color', '#EFF6FF');
      document.body.appendChild(widget);
    }

    // Update displays
    document.getElementById('agent-id-display').textContent = agentId;
    document.getElementById('base-url-display').textContent = baseUrl;

    // Sync color inputs
    const primaryPicker = document.getElementById('primary-color');
    const primaryText = document.getElementById('primary-text');
    const secondaryPicker = document.getElementById('secondary-color');
    const secondaryText = document.getElementById('secondary-text');

    primaryPicker.addEventListener('input', (e) => {
      primaryText.value = e.target.value.toUpperCase();
    });

    primaryText.addEventListener('input', (e) => {
      const value = e.target.value;
      if (/^#[0-9A-F]{6}$/i.test(value)) {
        primaryPicker.value = value;
      }
    });

    secondaryPicker.addEventListener('input', (e) => {
      secondaryText.value = e.target.value.toUpperCase();
    });

    secondaryText.addEventListener('input', (e) => {
      const value = e.target.value;
      if (/^#[0-9A-F]{6}$/i.test(value)) {
        secondaryPicker.value = value;
      }
    });

    function applyColors() {
      const primary = primaryText.value;
      const secondary = secondaryText.value;

      // Validate hex colors
      if (!/^#[0-9A-F]{6}$/i.test(primary) || !/^#[0-9A-F]{6}$/i.test(secondary)) {
        alert('Please enter valid hex color codes (e.g., #3B82F6)');
        return;
      }

      // Update widget
      const widget = document.getElementById('demo-widget');
      if (widget) {
        widget.setAttribute('primary-color', primary);
        widget.setAttribute('secondary-color', secondary);

        // Force re-render by removing and re-adding
        const parent = widget.parentNode;
        const nextSibling = widget.nextSibling;
        parent.removeChild(widget);

        const newWidget = document.createElement('webchat-widget');
        newWidget.id = 'demo-widget';
        newWidget.setAttribute('agent-id', agentId);
        newWidget.setAttribute('primary-color', primary);
        newWidget.setAttribute('secondary-color', secondary);

        parent.insertBefore(newWidget, nextSibling);
      }

      // Update embed code display
      document.getElementById('primary-display').textContent = primary;
      document.getElementById('secondary-display').textContent = secondary;
    }

    function applyPreset(primary, secondary) {
      primaryPicker.value = primary;
      primaryText.value = primary;
      secondaryPicker.value = secondary;
      secondaryText.value = secondary;
      applyColors();
    }

    function copyEmbedCode() {
      const primary = primaryText.value;
      const secondary = secondaryText.value;

      const embedCode = `<!-- AI Chat Widget -->
<webchat-widget
  agent-id="${agentId}"
  primary-color="${primary}"
  secondary-color="${secondary}">
</webchat-widget>
<script src="${baseUrl}/widget.js" async><\/script>`;

      navigator.clipboard.writeText(embedCode).then(() => {
        const btn = event.target;
        btn.textContent = 'Copied!';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.textContent = 'Copy';
          btn.classList.remove('copied');
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
        alert('Failed to copy to clipboard');
      });
    }
  </script>
</body>

</html>